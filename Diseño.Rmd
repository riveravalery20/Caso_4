---
title: "AN츼LISIS DIN츼MICO DE ETF"
subtitle: "Reporte Interactivo de Metales Preciosos"
author: "Departamento de An치lisis Financiero"
date: "`r format(Sys.Date(), '%d de %B de %Y')`"
output:
  html_document:
    theme: 
      version: 5
      bootswatch: minty
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: true
    toc_depth: 3
    number_sections: true
    fig_caption: true
    code_folding: hide
    css: Dise침o.css
    highlight: zenburn
    df_print: paged
    includes:
      in_header: header.html
---
```{r librerias, include=FALSE}

library(dplyr)
library(tidyr)
library(readr)
library(tidyverse)
library(class)
library(caret)
library(pROC)
library(ggthemes)
library(lubridate)
library(kableExtra)
library(knitr)
library(ggcorrplot)
library(scales)
library(gridExtra)
library(grid)
library(ggplotify)
library(broom)
library(DT)
library(scales)
library(htmltools)
library(plotly)
library(gganimate)
library(xaringan)
library(xaringanthemer)
library(xts)
library(readxl)
library(fpp2)
library(tseries)
library(quantmod)
library(plotly)
library(TTR)
```

# Introduccion

Los mercados de metales preciosos constituyen componentes esenciales de la econom칤a global cuya din치mica responde a m칰ltiples factores interconectados: ciclos econ칩micos, expectativas inflacionarias, volatilidad de sistemas financieros, demanda sectorial (manufactura, electr칩nica, automoci칩n, joyer칤a) y restricciones de oferta minera amplificadas por tensiones geopol칤ticas.
El ETF GLTR (abrdn Physical Precious Metals Basket Shares) proporciona exposici칩n diversificada a cuatro metales preciosos: oro, plata, platino y paladio, cuya correlaci칩n con ciclos macroecon칩micos var칤a seg칰n el metal y el contexto. Esta composici칩n lo posiciona como indicador agregado sensible de la salud de mercados de commodities y proxy de demanda por activos refugio durante episodios de inestabilidad financiera o depreciaci칩n de monedas.
El an치lisis de series temporales es indispensable para decodificar esta complejidad. Permite:
 1. Identificar tendencias estructurales de mediano y largo plazo subyacentes a fluctuaciones de corto plazo.
 2. Detectar y cuantificar patrones estacionales y componentes c칤clicos.
 3. Reconocer puntos de quiebre que se침alan cambios en condiciones de equilibrio de mercado.
4. Medir la evoluci칩n de la volatilidad para calibraci칩n de riesgo.
 5. Generar pron칩sticos probabil칤sticos que orienten decisiones de inversi칩n y gesti칩n de exposiciones en contextos de incertidumbre persistente.
Este tipo de an치lisis trasciende el inter칠s puramente financiero. Para inversores, la precisi칩n predictiva sobre GLTR mejora estrategias de diversificaci칩n y cobertura de riesgos sist칠micos. Para gestores de riesgos en instituciones financieras, estos pron칩sticos alimentan modelos de p칠rdidas potenciales, pruebas de estr칠s y c치lculos de requerimientos de capital. Para autoridades monetarias y bancos centrales, la din치mica de metales preciosos proporciona se침ales tempranas sobre presiones inflacionarias, credibilidad de pol칤ticas monetarias y cambios en expectativas de inversores globales. En s칤ntesis, la capacidad de anticipar cambios en mercados de materias primas es cr칤tica para la estabilidad financiera y prevenci칩n de crisis en contextos de creciente incertidumbre global.

<div class="particles" id="particles-js"></div>

<div class="custom-cursor"></div>
<div class="custom-cursor-follower"></div>

<!-- Navegaci칩n flotante -->
<div class="floating-nav">
  <a href="#hero" class="nav-dot active" data-label="Inicio"></a>
  <a href="#analisis" class="nav-dot" data-label="An치lisis"></a>
  <a href="#datos" class="nav-dot" data-label="Datos"></a>
  <a href="#graficos" class="nav-dot" data-label="Gr치ficos"></a>
  <a href="#conclusion" class="nav-dot" data-label="Conclusi칩n"></a>
</div>

<!-- Hero Section -->
<section id="hero" class="hero-section">
  <div class="floating-elements">
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
  </div>
  
  <div class="hero-bg"></div>
  
  <div class="hero-content">
    <h1 class="hero-title scroll-reveal">ETF DE METALES PRECIOSOS</h1>
    <p class="hero-subtitle scroll-reveal">
      An치lisis din치mico e interactivo de <span class="typing-text">rendimiento, riesgo y oportunidades</span>
    </p>
    
    <button class="btn-interactive scroll-reveal" onclick="openModal('data-modal')">
      Ver Datos en Tiempo Real
    </button>
  </div>
</section>

<!-- An치lisis de Datos -->
<section id="analisis" class="section">
  <div class="main-container">
    <h2 class="section-title scroll-reveal">An치lisis Cuantitativo</h2>
    
    <div class="card-grid">
      <div class="interactive-card scroll-reveal">
        <div class="card-icon">游늳</div>
        <h3 class="card-title">Rendimiento Hist칩rico</h3>
        <p class="card-content">
          An치lisis de 5 a침os de rendimiento con comparativa de benchmarks
          y an치lisis de tendencias estacionales.
        </p>
        <button class="btn-interactive" onclick="toggleChart('chart1')">
          Ver Gr치fico
        </button>
      </div>
      
      <div class="interactive-card scroll-reveal">
        <div class="card-icon">丘뒲잺</div>
        <h3 class="card-title">An치lisis de Riesgo</h3>
        <p class="card-content">
          Evaluaci칩n de volatilidad, Value at Risk (VaR) y medidas de riesgo
          ajustadas por liquidez.
        </p>
        <button class="btn-interactive" onclick="toggleChart('chart2')">
          Ver M칠tricas
        </button>
      </div>
      
      <div class="interactive-card scroll-reveal">
        <div class="card-icon">游댌</div>
        <h3 class="card-title">Correlaciones</h3>
        <p class="card-content">
          An치lisis de correlaci칩n con otros activos, sectores y factores
          macroecon칩micos relevantes.
        </p>
        <button class="btn-interactive" onclick="toggleChart('chart3')">
          Ver Matriz
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Datos en Tiempo Real -->
<section id="datos" class="section">
  <div class="main-container">
    <h2 class="section-title scroll-reveal">Datos en Tiempo Real</h2>
    
    <div class="live-data scroll-reveal">
      <div class="data-stream">
        <div class="data-item">
          <div class="data-value" id="price-gld">$185.42</div>
          <div class="data-label">GLD - SPDR Gold Shares</div>
        </div>
        
        <div class="data-item">
          <div class="data-value" id="price-slv">$23.15</div>
          <div class="data-label">SLV - iShares Silver Trust</div>
        </div>
        
        <div class="data-item">
          <div class="data-value" id="change-day">+2.5%</div>
          <div class="data-label">Variaci칩n Diaria</div>
        </div>
        
        <div class="data-item">
          <div class="data-value" id="volume">$4.2B</div>
          <div class="data-label">Volumen Diario</div>
        </div>
      </div>
    </div>
    
    ```{r, echo=FALSE}
    # Datos simulados para la tabla
    set.seed(123)
    fechas <- seq.Date(as.Date("2023-01-01"), as.Date("2024-01-01"), by = "month")
    
    datos_etf <- data.frame(
      Fecha = format(fechas, "%b %Y"),
      GLD = round(cumprod(1 + rnorm(13, 0.015, 0.05)) * 100, 2),
      SLV = round(cumprod(1 + rnorm(13, 0.012, 0.07)) * 100, 2),
      IAU = round(cumprod(1 + rnorm(13, 0.014, 0.06)) * 100, 2),
      Cambio_GLD = round(rnorm(13, 0.5, 2), 2)
    )
    
    # Crear tabla interactiva
    DT::datatable(
      datos_etf,
      options = list(
        pageLength = 6,
        dom = 'Bfrtip',
        buttons = c('copy', 'csv', 'excel', 'pdf'),
        initComplete = JS(
          "function(settings, json) {",
          "$(this.api().table().header()).css({'background-color': '#3A86FF', 'color': 'white'});",
          "}"
        )
      ),
      class = 'display compact',
      rownames = FALSE,
      caption = 'Rendimiento Mensual de ETFs de Metales Preciosos'
    ) %>%
      DT::formatStyle(
        'Cambio_GLD',
        background = styleColorBar(datos_etf$Cambio_GLD, '#3A86FF'),
        backgroundSize = '100% 90%',
        backgroundRepeat = 'no-repeat',
        backgroundPosition = 'center'
      ) %>%
      DT::formatStyle(
        columns = c('GLD', 'SLV', 'IAU'),
        color = styleInterval(c(0), c('#E63946', '#38B000'))
      )
    ```
  </div>
</section>

<!-- Gr치ficos Interactivos -->
<section id="graficos" class="section">
  <div class="main-container">
    <h2 class="section-title scroll-reveal">Visualizaci칩n de Datos</h2>
    
    <div class="animated-chart scroll-reveal">
      <h3>Evoluci칩n de Precios</h3>
      
      ```{r, echo=FALSE}
      library(plotly)
      
      # Crear datos para el gr치fico
      set.seed(123)
      fechas <- seq.Date(as.Date("2020-01-01"), as.Date("2024-01-01"), by = "month")
      n <- length(fechas)
      
      # Simular precios
      precio_gld <- cumprod(1 + rnorm(n, 0.01, 0.04)) * 100
      precio_slv <- cumprod(1 + rnorm(n, 0.008, 0.06)) * 100
      
      # Crear gr치fico interactivo
      plot_ly() %>%
        add_trace(
          x = fechas,
          y = precio_gld,
          type = 'scatter',
          mode = 'lines',
          name = 'GLD',
          line = list(color = '#3A86FF', width = 3),
          hoverinfo = 'text',
          text = ~paste('GLD: $', round(precio_gld, 2), '<br>Fecha: ', fechas)
        ) %>%
        add_trace(
          x = fechas,
          y = precio_slv,
          type = 'scatter',
          mode = 'lines',
          name = 'SLV',
          line = list(color = '#8338EC', width = 3, dash = 'dash'),
          hoverinfo = 'text',
          text = ~paste('SLV: $', round(precio_slv, 2), '<br>Fecha: ', fechas)
        ) %>%
        layout(
          title = 'Evoluci칩n de Precios - ETFs de Metales',
          xaxis = list(title = 'Fecha', gridcolor = '#e0e0e0'),
          yaxis = list(title = 'Precio ($)', gridcolor = '#e0e0e0'),
          plot_bgcolor = 'white',
          paper_bgcolor = 'white',
          hovermode = 'x unified',
          legend = list(
            orientation = 'h',
            x = 0.5,
            xanchor = 'center',
            y = -0.2
          )
        ) %>%
        config(displayModeBar = TRUE)
      ```
    </div>
    
    <div class="animated-chart scroll-reveal">
      <h3>Distribuci칩n de Retornos</h3>
      
      ```{r, echo=FALSE}
      # Gr치fico de distribuci칩n
      retornos <- rnorm(1000, 0.001, 0.02)
      
      plot_ly(
        x = retornos,
        type = "histogram",
        histnorm = "probability",
        marker = list(
          color = '#3A86FF',
          line = list(color = '#2667CC', width = 1)
        ),
        nbinsx = 50
      ) %>%
        layout(
          title = 'Distribuci칩n de Retornos Diarios - GLD',
          xaxis = list(title = 'Retorno Diario'),
          yaxis = list(title = 'Frecuencia'),
          plot_bgcolor = 'white',
          paper_bgcolor = 'white',
          shapes = list(
            list(
              type = 'line',
              x0 = mean(retornos),
              x1 = mean(retornos),
              y0 = 0,
              y1 = 0.5,
              line = list(color = '#FF006E', width = 2, dash = 'dash')
            )
          )
        )
      ```
    </div>
  </div>
</section>

<!-- Timeline de Eventos -->
<section class="section">
  <div class="main-container">
    <h2 class="section-title scroll-reveal">Linea de Tiempo - Eventos Clave</h2>
    
    <div class="timeline">
      <div class="timeline-item scroll-reveal">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <h4>2024 Q1</h4>
          <p>Incremento del 15% en reservas de oro por bancos centrales</p>
        </div>
      </div>
      
      <div class="timeline-item scroll-reveal">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <h4>2023 Q4</h4>
          <p>Nuevas regulaciones en miner칤a sostenible afectan producci칩n</p>
        </div>
      </div>
      
      <div class="timeline-item scroll-reveal">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <h4>2023 Q2</h4>
          <p>Aumento de tasas de inter칠s impacta metales preciosos</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Secci칩n Parallax -->
<div class="parallax-section">
  <div class="parallax-bg"></div>
  <div class="parallax-content">
    <h2 class="scroll-reveal" style="font-size: 3rem; margin-bottom: 20px;">
      쯃isto para invertir?
    </h2>
    <p class="scroll-reveal" style="font-size: 1.5rem; max-width: 600px;">
      Accede a an치lisis en tiempo real y herramientas avanzadas para tu estrategia de inversi칩n
    </p>
    <button class="btn-interactive scroll-reveal" style="margin-top: 30px;">
      Solicitar Demo
    </button>
  </div>
</div>

<!-- Modal -->
<div id="data-modal" class="modal-overlay">
  <div class="modal-content">
    <button class="close-modal" onclick="closeModal('data-modal')">칑</button>
    <h2>Datos en Tiempo Real</h2>
    
    <div class="animated-table">
      <table>
        <thead>
          <tr>
            <th>Ticker</th>
            <th>Precio</th>
            <th>Cambio</th>
            <th>Volumen</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>GLD</td>
            <td>$185.42</td>
            <td style="color: #38B000;">+2.5%</td>
            <td>45.2M</td>
          </tr>
          <tr>
            <td>SLV</td>
            <td>$23.15</td>
            <td style="color: #E63946;">-1.2%</td>
            <td>78.9M</td>
          </tr>
          <tr>
            <td>IAU</td>
            <td>$38.76</td>
            <td style="color: #38B000;">+1.8%</td>
            <td>32.1M</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="animated-footer">
  <div class="wave-animation"></div>
  <div class="main-container" style="position: relative; z-index: 2;">
    <div style="text-align: center; padding: 40px 0;">
      <h3 style="margin-bottom: 20px;">ETF Analytics Platform</h3>
      <p style="opacity: 0.8; max-width: 600px; margin: 0 auto 30px;">
        Plataforma de an치lisis financiero avanzado con datos en tiempo real y herramientas interactivas
      </p>
      <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
        <button class="btn-interactive">Documentaci칩n</button>
        <button class="btn-interactive">API Access</button>
        <button class="btn-interactive">Contacto</button>
      </div>
    </div>
  </div>
</footer>

<script>
// JavaScript para las animaciones interactivas
document.addEventListener('DOMContentLoaded', function() {
  // Cursor personalizado
  const cursor = document.querySelector('.custom-cursor');
  const follower = document.querySelector('.custom-cursor-follower');
  
  document.addEventListener('mousemove', (e) => {
    cursor.style.left = e.clientX + 'px';
    cursor.style.top = e.clientY + 'px';
    
    setTimeout(() => {
      follower.style.left = e.clientX + 'px';
      follower.style.top = e.clientY + 'px';
    }, 100);
  });
  
  // Navegaci칩n flotante
  const navDots = document.querySelectorAll('.nav-dot');
  const sections = document.querySelectorAll('section');
  
  window.addEventListener('scroll', () => {
    let current = '';
    
    sections.forEach(section => {
      const sectionTop = section.offsetTop;
      const sectionHeight = section.clientHeight;
      
      if (pageYOffset >= sectionTop - 200) {
        current = section.getAttribute('id');
      }
    });
    
    navDots.forEach(dot => {
      dot.classList.remove('active');
      if (dot.getAttribute('href') === `#${current}`) {
        dot.classList.add('active');
      }
    });
  });
  
  // Scroll reveal
  const revealElements = document.querySelectorAll('.scroll-reveal');
  
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1 });
  
  revealElements.forEach(el => revealObserver.observe(el));
  
  // Animaci칩n de part칤culas
  createParticles();
  
  // Datos en tiempo real simulados
  simulateLiveData();
});

function createParticles() {
  const particlesContainer = document.getElementById('particles-js');
  const colors = ['#3A86FF', '#8338EC', '#FF006E', '#FF9E00', '#38B000'];
  
  for (let i = 0; i < 50; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    
    const size = Math.random() * 10 + 5;
    particle.style.width = `${size}px`;
    particle.style.height = `${size}px`;
    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
    particle.style.left = `${Math.random() * 100}vw`;
    particle.style.animationDelay = `${Math.random() * 20}s`;
    
    particlesContainer.appendChild(particle);
  }
}

function simulateLiveData() {
  const elements = {
    'price-gld': 185.42,
    'price-slv': 23.15,
    'change-day': 2.5,
    'volume': 4.2
  };
  
  setInterval(() => {
    for (const [id, baseValue] of Object.entries(elements)) {
      const element = document.getElementById(id);
      if (element) {
        const change = (Math.random() - 0.5) * 0.1;
        const newValue = baseValue * (1 + change);
        
        if (id.includes('price')) {
          element.textContent = `$${newValue.toFixed(2)}`;
        } else if (id === 'change-day') {
          const sign = change >= 0 ? '+' : '';
          element.textContent = `${sign}${newValue.toFixed(2)}%`;
          element.style.color = change >= 0 ? '#38B000' : '#E63946';
        } else if (id === 'volume') {
          element.textContent = `$${newValue.toFixed(1)}B`;
        }
        
        // Efecto de parpadeo
        element.style.animation = 'none';
        setTimeout(() => {
          element.style.animation = 'pulse 0.5s ease';
        }, 10);
      }
    }
  }, 3000);
}

function openModal(modalId) {
  document.getElementById(modalId).classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeModal(modalId) {
  document.getElementById(modalId).classList.remove('active');
  document.body.style.overflow = 'auto';
}

function toggleChart(chartId) {
  alert(`Mostrando gr치fico: ${chartId}`);
  // Aqu칤 ir칤a la l칩gica para mostrar/ocultar gr치ficos espec칤ficos
}
</script>