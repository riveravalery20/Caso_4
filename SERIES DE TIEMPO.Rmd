---
title: "Analisis temporal de la acción de metales preciosos en la bolsa de valores"
author: "Nombre del Autor"
date: "Fecha"
output:
  html_document:
    toc: false
    theme: default
---

```{css, echo=FALSE}
/* ------------------ CHUNK CSS (pegar en Rmd) ------------------ */
/* Variables de colores armoniosos */
:root {
--dorado: #D4AF37;
--plateado: #C0C0C0;
--violeta-profundo: #4B0082;
--fondo-crema: #F5F5DC;
--fondo-blanco: #FFFFFF;
--gris-claro: #E9ECEF;
--gris-medio: #ADB5BD;
--gris-oscuro: #495057;
--sombra: 0 2px 8px rgba(75, 0, 130, 0.1);
--sombra-hover: 0 4px 16px rgba(75, 0, 130, 0.15);
--border-radius: 8px;
--transition: all 0.3s ease;
}

/* Reset y fuente base */
body {
font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, sans-serif;
background-color: var(--fondo-crema);
color: var(--gris-oscuro);
line-height: 1.75;
margin: 0;
padding: 0;
}

/* Estructura principal */
.main-container {
display: flex;
max-width: 1400px;
margin: 0 auto;
padding: 20px;
gap: 30px;
background-color: transparent;
}

/* Sidebar fijo a la izquierda */
.sidebar {
width: 300px;
position: fixed;
top: 0;
left: 0; /* Posicionado a la izquierda */
height: 100vh;
background-color: var(--fondo-blanco);
border-right: 2px solid var(--dorado);
box-shadow: var(--sombra);
overflow-y: auto;
z-index: 1000;
padding: 20px;
}

.sidebar-header {
text-align: center;
margin-bottom: 30px;
border-bottom: 2px solid var(--plateado);
padding-bottom: 15px;
}

.sidebar-header img.logo-uv {
width: 80px;
height: auto;
margin-bottom: 10px;
}

.sidebar-header h1 {
color: var(--violeta-profundo);
font-size: 1.8rem;
font-weight: bold;
margin: 0;
}

.sidebar-header h2 {
color: var(--dorado);
font-size: 1.2rem;
font-weight: normal;
margin: 5px 0 0 0;
}

.sidebar-nav {
list-style: none;
padding: 0;
margin: 0;
}

.sidebar-nav li {
margin-bottom: 10px;
}

.sidebar-nav a {
display: block;
padding: 12px 15px;
text-decoration: none;
color: var(--gris-oscuro);
background-color: var(--fondo-blanco);
border-radius: var(--border-radius);
transition: var(--transition);
font-weight: 500;
border-left: 4px solid transparent;
}

.sidebar-nav a:hover,
.sidebar-nav a.active {
background-color: var(--gris-claro);
color: var(--violeta-profundo);
border-left: 4px solid var(--dorado);
transform: translateX(5px);
}

.sidebar-nav .icon { margin-right: 8px; }

/* Contenido principal con margen para el sidebar izquierdo */
.main-content {
flex: 1;
margin-left: 330px; /* Espacio para el sidebar fijo a la izquierda */
background-color: var(--fondo-blanco);
border-radius: var(--border-radius);
box-shadow: var(--sombra);
padding: 40px;
transition: var(--transition);
min-height: 100vh;
}

.main-content:hover { box-shadow: var(--sombra-hover); }

/* Títulos */
h1.title {
color: var(--violeta-profundo);
text-align: center;
font-weight: 700;
font-size: 2.8rem;
margin-bottom: 30px;
padding-bottom: 20px;
border-bottom: 3px solid var(--dorado);
text-shadow: 0 2px 4px rgba(75,0,130,0.1);
}

/* Encabezados secundarios */
h1, h2, h3, h4, h5, h6 {
font-family: 'Segoe UI', sans-serif;
color: var(--violeta-profundo);
font-weight: 600;
margin-top: 40px;
margin-bottom: 20px;
line-height: 1.3;
}

h1 { font-size: 2.4rem; border-bottom: 2px solid var(--plateado); padding-bottom: 15px; }
h2 {
font-size: 2rem;
border-left: 4px solid var(--dorado);
padding-left: 20px;
background: linear-gradient(90deg, var(--gris-claro) 0%, var(--fondo-blanco) 100%);
padding: 15px 20px;
border-radius: 0 var(--border-radius) var(--border-radius) 0;
}
h3 { font-size: 1.6rem; color: var(--dorado); }
h4 { font-size: 1.3rem; color: var(--dorado); }

/* Texto */
p, li, td, th { font-family: 'Segoe UI', sans-serif; text-align: justify; line-height: 1.75; color: var(--gris-oscuro); font-size: 16px; margin-bottom: 16px; }

/* Tablas */
table {
width: 100%;
border-collapse: collapse;
margin: 25px 0;
font-size: 14px;
border-radius: var(--border-radius);
overflow: hidden;
box-shadow: var(--sombra);
}
thead th { background: var(--violeta-profundo); color: var(--fondo-blanco); font-weight: 600; padding: 15px 12px; text-align: left; font-size: 15px; }
tbody td { padding: 12px; border-bottom: 1px solid var(--gris-claro); transition: var(--transition); }
tbody tr:nth-child(even) { background: var(--gris-claro); }
tbody tr:hover { background: linear-gradient(90deg, var(--plateado), var(--dorado)); color: var(--violeta-profundo); transform: scale(1.01); }

/* Bloques de código: ocultos por defecto */
pre {
background: var(--gris-claro);
border: 1px solid var(--gris-medio);
border-radius: var(--border-radius);
padding: 20px;
overflow-x: auto;
font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
font-size: 14px;
line-height: 1.4;
box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
display: none !important; /* Inicialmente oculto */
}
code {
background: var(--gris-medio);
padding: 3px 6px;
border-radius: 3px;
font-family: monospace;
font-size: 14px;
color: var(--violeta-profundo);
}

/* Gráficos y figuras */
.figure { text-align:center; margin:30px 0; padding:20px; background:var(--fondo-blanco); border:1px solid var(--gris-medio); border-radius:var(--border-radius); box-shadow:var(--sombra); transition:var(--transition); }
.figure:hover { box-shadow: var(--sombra-hover); }
.figure img { border-radius: var(--border-radius); max-width:100%; height:auto; }

/* Enlaces, listas, botones */
a { color: var(--violeta-profundo); text-decoration: none; font-weight: 500; transition: var(--transition); border-bottom:1px solid transparent; }
a:hover { color: var(--dorado); border-bottom:1px solid var(--dorado); }
ul, ol { padding-left:25px; margin:16px 0; }
ul li, ol li { margin-bottom:8px; line-height:1.6; }

/* Botón de toggle código (funcional) */
.floating-code-btn {
position: fixed;
bottom: 20px;
right: 20px;
background-color: var(--violeta-profundo);
color: var(--fondo-blanco);
border: none;
padding: 12px 20px;
border-radius: 50px;
cursor: pointer;
font-size: 14px;
font-family: 'Segoe UI', sans-serif;
box-shadow: var(--sombra);
transition: var(--transition);
z-index: 1000;
}
.floating-code-btn:hover { background-color: var(--dorado); transform: scale(1.05); }

/* Responsive */
@media (max-width:1024px) {
.main-container { flex-direction: column; max-width:100%; padding:15px; }
.sidebar { position: static; width:100%; height:auto; margin-bottom:20px; }
.main-content { margin-left:0; padding:20px; }
h1.title { font-size: 2.2rem; }
h1 { font-size: 1.8rem; }
h2 { font-size: 1.5rem; }
}
@media (max-width:768px) {
.main-container { padding:10px; }
.main-content { padding:15px; }
h1.title { font-size:1.8rem; }
h1 { font-size:1.5rem; }
h2 { font-size:1.3rem; padding:10px 15px; }
table { font-size:12px; }
thead th, tbody td { padding:8px 6px; }
}

/* Animación y accesibilidad */
@keyframes fadeInUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:translateY(0); } }
.content-section { animation: fadeInUp 0.6s ease-out; }
:focus { outline: 2px solid var(--dorado); outline-offset: 2px; }

/* Scrollbar */
::-webkit-scrollbar { width:8px; }
::-webkit-scrollbar-track { background: var(--gris-claro); }
::-webkit-scrollbar-thumb { background: var(--violeta-profundo); border-radius:4px; }
::-webkit-scrollbar-thumb:hover { background: var(--dorado); }
```


```{js, echo=FALSE}
document.addEventListener('DOMContentLoaded', function() {

/* 1) Asegurar existencia del sidebar y main-content */
if(!document.querySelector('.sidebar')) {
const sidebar = document.createElement('nav');
sidebar.className = 'sidebar';
sidebar.innerHTML = `       <div class="sidebar-header">         <img class="logo-uv" src="" alt="" style="display:none"/>         <h1>Menú</h1>         <h2>Índice</h2>       </div>       <ul class="sidebar-nav" id="sidebar-nav"></ul>
    `;
document.body.insertBefore(sidebar, document.body.firstChild);
}

if(!document.querySelector('.main-content')) {
const main = document.createElement('div');
main.className = 'main-content';
// Mover todo el contenido de body (excepto .sidebar) dentro de main-content
const nodes = Array.from(document.body.childNodes).filter(n => ! (n.nodeType===1 && n.classList && n.classList.contains('sidebar')));
nodes.forEach(n => main.appendChild(n));
document.body.appendChild(main);
// envolver en main-container si no existe
if(!document.querySelector('.main-container')) {
const wrapper = document.createElement('div');
wrapper.className = 'main-container';
const sb = document.querySelector('.sidebar');
wrapper.appendChild(sb);
wrapper.appendChild(main);
document.body.appendChild(wrapper);
}
}

/* 2) Construir el índice a partir de encabezados h1-h3 dentro de .main-content */
function buildIndex() {
const nav = document.getElementById('sidebar-nav');
if(!nav) return;
nav.innerHTML = '';
const headers = Array.from(document.querySelectorAll('.main-content h1, .main-content h2, .main-content h3'));
headers.forEach((h, i) => {
if(!h.id) {
// generar id seguro
h.id = 'h-' + i + '-' + h.textContent.trim().toLowerCase().replace(/\s+/g,'-').replace(/[^a-z0-9-_]/g,'');
}
const li = document.createElement('li');
const a = document.createElement('a');
a.href = '#' + h.id;
a.innerHTML = h.textContent;
a.addEventListener('click', function(ev){
ev.preventDefault();
document.getElementById(h.id).scrollIntoView({behavior:'smooth', block:'start'});
// marcar activo
document.querySelectorAll('.sidebar-nav a').forEach(x => x.classList.remove('active'));
this.classList.add('active');
});
// sangría según nivel
if(h.tagName.toLowerCase()==='h2') a.style.paddingLeft = '18px';
if(h.tagName.toLowerCase()==='h3') a.style.paddingLeft = '30px';
li.appendChild(a);
nav.appendChild(li);
});
}
buildIndex();

/* observar cambios en main-content para reconstruir índice si es necesario */
const observer = new MutationObserver(function(muts){
buildIndex();
});
const mainContent = document.querySelector('.main-content');
if(mainContent) observer.observe(mainContent, { childList:true, subtree:true });

/* 3) Insertar botones toggle para cada bloque pre (y habilitar mostrar/ocultar) */
function setupCodeToggles() {
const pres = Array.from(document.querySelectorAll('.main-content pre'));
pres.forEach((pre, idx) => {
// si ya tiene botón, saltar
if(pre.dataset.toggled === 'true') return;
// crear botón
  const btn = document.createElement('button');
  btn.className = 'toggle-code-btn';
  btn.type = 'button';
  btn.textContent = 'Mostrar / Ocultar detalle técnico';
  btn.style.margin = '12px 0';
  btn.style.display = 'inline-block';
  btn.style.padding = '8px 12px';
  btn.style.borderRadius = '8px';
  btn.style.cursor = 'pointer';
  btn.style.border = 'none';
  btn.style.background = 'linear-gradient(90deg,var(--violeta-profundo),var(--dorado))';
  btn.style.color = '#fff';
  btn.style.fontWeight = '700';

  // crear wrapper para el pre (mantener estructura)
  const wrapper = document.createElement('div');
  wrapper.className = 'toggle-wrapper';
  wrapper.style.marginBottom = '16px';

  // insertar wrapper antes del pre y mover pre dentro
  pre.parentNode.insertBefore(wrapper, pre);
  wrapper.appendChild(btn);
  wrapper.appendChild(pre);

  // el pre está oculto por CSS con !important; usar setProperty para forzar mostrar con importancia
  let visible = false;
  btn.addEventListener('click', function(){
    visible = !visible;
    if(visible) {
      pre.style.setProperty('display', 'block', 'important'); // sobrescribe !important
      btn.classList.add('active');
    } else {
      pre.style.setProperty('display', 'none', 'important');
      btn.classList.remove('active');
    }
  });

  // marca como procesado
  pre.dataset.toggled = 'true';
});

}
setupCodeToggles();

/* 4) Botón flotante que muestra/oculta todos los pre de la página */
if(!document.querySelector('.floating-code-btn')) {
const flot = document.createElement('button');
flot.className = 'floating-code-btn';
flot.type = 'button';
flot.textContent = 'Mostrar / Ocultar Todo';
document.body.appendChild(flot);
let allVisible = false;
flot.addEventListener('click', function(){
allVisible = !allVisible;
document.querySelectorAll('.main-content pre').forEach(pre => {
if(allVisible) {
pre.style.setProperty('display', 'block', 'important');
} else {
pre.style.setProperty('display', 'none', 'important');
}
});
// actualizar clase botones individuales si existen
document.querySelectorAll('.toggle-code-btn').forEach(btn => {
if(allVisible) btn.classList.add('active'); else btn.classList.remove('active');
});
});
}

/* 5) Si hay enlaces ancla desde URL, marcar activo en sidebar */
setTimeout(function(){
const hash = window.location.hash;
if(hash) {
const a = document.querySelector('.sidebar-nav a[href="'+hash+'"]');
if(a) a.classList.add('active');
}
}, 400);

});




```


